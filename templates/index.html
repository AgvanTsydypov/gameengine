{% extends "base.html" %}

{% block title %}AI Game Studio — Pixel{% endblock %}

{% block content %}
<main>
  <section class="hero">
    <div class="kicker"><span class="dot"></span>MINIMAL • PIXEL • SPACE</div>
    <h1>BUILD AI GAMES. <br/> SHIP FAST. LOOK STELLAR.</h1>
    <p class="sub">Generate, iterate, and publish — all in one pixel-perfect studio. No noise. Just play.</p>
    <div class="hero-cta">
      {% if session.user_id %}
        <a class="btn btn-cta" href="{{ url_for('create_game') }}"><span>+ CREATE NEW GAME</span></a>
        <a class="btn btn-ghost" href="{{ url_for('games') }}"><span>EXPLORE COMMUNITY</span></a>
      {% else %}
        <a class="btn btn-cta auth-required" href="#" id="create-game-btn"><span>+ CREATE NEW GAME</span></a>
        <a class="btn btn-ghost" href="{{ url_for('games') }}"><span>EXPLORE COMMUNITY</span></a>
      {% endif %}
    </div>
  </section>

  {% if trending_games %}
  <section id="trending" class="section" aria-labelledby="trend-title">
    <h2 id="trend-title">RECENT COMMUNITY GAMES</h2>
    <div class="grid">
      {% for game in trending_games %}
      <a href="{{ url_for('play_uploaded_game', game_id=game.id) }}" class="card" aria-label="Play game: {{ game.title }}">
        <div class="thumb">
          <span class="badge px-border">★ {{ game.rating }}</span>
          <span class="badge px-border" style="background: var(--cyber); color: var(--bg);">USER</span>
        </div>
        <div class="title">{{ game.title }}</div>
        <div class="meta">{{ game.category }} • {{ game.plays }} PLAYS</div>
      </a>
      {% endfor %}
    </div>
    <div style="text-align: center; margin-top: 30px;">
      <a class="btn btn-ghost" href="{{ url_for('games') }}"><span>VIEW ALL GAMES</span></a>
    </div>
  </section>
  {% endif %}
</main>

<!-- Login Modal -->
<div class="modal-overlay" id="login-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 class="modal-title">LOGIN</h3>
      <button class="modal-close" type="button" aria-label="Close">&times;</button>
    </div>
    <div class="modal-body">
      <div id="login-alert"></div>
      <form id="login-form">
        <div class="form-group">
          <label class="form-label" for="login-email">EMAIL</label>
          <input class="form-input" type="email" id="login-email" name="email" required placeholder="your@email.com">
        </div>
        <div class="form-group">
          <label class="form-label" for="login-password">PASSWORD</label>
          <input class="form-input" type="password" id="login-password" name="password" required placeholder="••••••••">
        </div>
        <button class="btn btn-cta form-submit" type="submit">
          <span>LOGIN</span>
        </button>
      </form>
      <div class="auth-switch">
        <p>NEW TO THE GALAXY? <a href="#" id="switch-to-register">CREATE ACCOUNT</a></p>
      </div>
    </div>
  </div>
</div>

<!-- Register Modal -->
<div class="modal-overlay" id="register-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 class="modal-title">CREATE ACCOUNT</h3>
      <button class="modal-close" type="button" aria-label="Close">&times;</button>
    </div>
    <div class="modal-body">
      <div id="register-alert"></div>
      <form id="register-form">
        <div class="form-group">
          <label class="form-label" for="register-email">EMAIL</label>
          <input class="form-input" type="email" id="register-email" name="email" required placeholder="your@email.com">
        </div>
        <div class="form-group">
          <label class="form-label" for="register-password">PASSWORD</label>
          <input class="form-input" type="password" id="register-password" name="password" required placeholder="••••••••">
        </div>
        <div class="form-group">
          <label class="form-label" for="register-confirm-password">CONFIRM PASSWORD</label>
          <input class="form-input" type="password" id="register-confirm-password" name="confirm_password" required placeholder="••••••••">
        </div>
        <button class="btn btn-cta form-submit" type="submit">
          <span>CREATE ACCOUNT</span>
        </button>
      </form>
      <div class="auth-switch">
        <p>ALREADY HAVE AN ACCOUNT? <a href="#" id="switch-to-login">LOGIN</a></p>
      </div>
    </div>
  </div>
</div>
{% endblock %}